import{r as a,R as E}from"./react-IdAWuXfe.js";const k=["light","dark"],x="(prefers-color-scheme: dark)",N=typeof window>"u",L=a.createContext(void 0),j={setTheme:e=>{},themes:[]},H=()=>{var e;return(e=a.useContext(L))!==null&&e!==void 0?e:j},P=e=>a.useContext(L)?E.createElement(a.Fragment,null,e.children):E.createElement(R,e),J=["light","dark"],R=({forcedTheme:e,disableTransitionOnChange:u=!1,enableSystem:t=!0,enableColorScheme:$=!0,storageKey:l="theme",themes:r=J,defaultTheme:n=t?"system":"light",attribute:y="data-theme",value:h,children:b,nonce:S})=>{const[c,m]=a.useState(()=>M(l,n)),[p,i]=a.useState(()=>M(l)),f=h?Object.values(h):r,T=a.useCallback(o=>{let s=o;if(!s)return;o==="system"&&t&&(s=O());const w=h?h[s]:s,I=u?z():null,C=document.documentElement;if(y==="class"?(C.classList.remove(...f),w&&C.classList.add(w)):w?C.setAttribute(y,w):C.removeAttribute(y),$){const A=k.includes(n)?n:null,K=k.includes(s)?s:A;C.style.colorScheme=K}I==null||I()},[]),d=a.useCallback(o=>{m(o);try{localStorage.setItem(l,o)}catch{}},[e]),v=a.useCallback(o=>{const s=O(o);i(s),c==="system"&&t&&!e&&T("system")},[c,e]);a.useEffect(()=>{const o=window.matchMedia(x);return o.addListener(v),v(o),()=>o.removeListener(v)},[v]),a.useEffect(()=>{const o=s=>{s.key===l&&d(s.newValue||n)};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)},[d]),a.useEffect(()=>{T(e??c)},[e,c]);const g=a.useMemo(()=>({theme:c,setTheme:d,forcedTheme:e,resolvedTheme:c==="system"?p:c,themes:t?[...r,"system"]:r,systemTheme:t?p:void 0}),[c,d,e,p,t,r]);return E.createElement(L.Provider,{value:g},E.createElement(_,{forcedTheme:e,disableTransitionOnChange:u,enableSystem:t,enableColorScheme:$,storageKey:l,themes:r,defaultTheme:n,attribute:y,value:h,children:b,attrs:f,nonce:S}),b)},_=a.memo(({forcedTheme:e,storageKey:u,attribute:t,enableSystem:$,enableColorScheme:l,defaultTheme:r,value:n,attrs:y,nonce:h})=>{const b=r==="system",S=t==="class"?`var d=document.documentElement,c=d.classList;c.remove(${y.map(i=>`'${i}'`).join(",")});`:`var d=document.documentElement,n='${t}',s='setAttribute';`,c=l?k.includes(r)&&r?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${r}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(i,f=!1,T=!0)=>{const d=n?n[i]:i,v=f?i+"|| ''":`'${d}'`;let g="";return l&&T&&!f&&k.includes(i)&&(g+=`d.style.colorScheme = '${i}';`),t==="class"?g+=f||d?`c.add(${v})`:"null":d&&(g+=`d[s](n,${v})`),g},p=e?`!function(){${S}${m(e)}}()`:$?`!function(){try{${S}var e=localStorage.getItem('${u}');if('system'===e||(!e&&${b})){var t='${x}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${n?`var x=${JSON.stringify(n)};`:""}${m(n?"x[e]":"e",!0)}}${b?"":"else{"+m(r,!1,!1)+"}"}${c}}catch(e){}}()`:`!function(){try{${S}var e=localStorage.getItem('${u}');if(e){${n?`var x=${JSON.stringify(n)};`:""}${m(n?"x[e]":"e",!0)}}else{${m(r,!1,!1)};}${c}}catch(t){}}();`;return E.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:p}})},()=>!0),M=(e,u)=>{if(N)return;let t;try{t=localStorage.getItem(e)||void 0}catch{}return t||u},z=()=>{const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},O=e=>(e||(e=window.matchMedia(x)),e.matches?"dark":"light");export{P as $,H as y};
